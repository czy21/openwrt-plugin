name: Build packages

on:
  push:
    paths:
      - luci/**
      - package/**
  workflow_dispatch:
    inputs:
      mirror: 
        type: choice
        required: true
        default: https://nexus.czy21.com/repository/openwrt-download
        options: 
          - https://nexus.czy21.com/repository/openwrt-download
          - https://mirrors.hit.edu.cn/openwrt
      packages:
        type: string
        description: "packages: adguardhome dnsproxy"
      debug:
        type: boolean
        default: false
jobs:
  build:
    uses: czy21/share/.github/workflows/openwrt-build-package.yml@main
    with: 
      mirror: ${{ inputs.mirror || 'https://mirrors.hit.edu.cn/openwrt' }}
      packages: ${{ inputs.packages }}
      debug: ${{ inputs.debug || false }}
